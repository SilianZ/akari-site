---
sidebar_position: 1
---

import "@site/src/css/table.css";

# 配置文件

本文将说明配置文件（`config.toml`）中各参数的用途。

机器人的配置文件储存在 `./config/` 目录下，在第一次启动后生成。配置文件可使用 `~config` 命令修改，并在重载模块或重启后生效。

如果你不需要某些功能，请将对应的键删除，请勿留空。

刚开始使用的机器人拥有以下默认配置：

```toml title="config/config.toml"
[secret]
db_path = "mysql+pymysql://"
check_accessKeyId =
check_accessKeySecret =
web_render =
proxy =
dc_token =
tg_token =
matrix_homeserver =
matrix_user =
matrix_device_id =
matrix_device_name =
matrix_token =
matrix_megolm_backup_passphrase =
kook_token =
openai_api_key =
curseforge_api_key =
exchange_rate_api_key =
wolfram_alpha_appid =
jwt_secret =
[cfg]
api_port = 5000
base_superuser = "QQ|2596322644"
debug = false
cache_path = "./cache/"
command_prefix = ["~", "～",]
confirm_command = ["是", "对", "對", "yes", "Yes", "YES", "y", "Y",]
disabled_bots = ["",]
locale = "zh_cn"
timezone_offset = "+8"
bug_report_url = "https://s.wd-ljt.com/botreportbug"
bug_report_targets = ["",]
donate_url = "https://afdian.net/@teahouse"
help_url = "https://bot.teahouse.team"
issue_url = "https://github.com/Teahouse-Studios/bot/issues/new/choose"
wiki_whitelist_url = "https://s.wd-ljt.com/botwhitelist"
web_render_local =
qq_account = 2314163511
qq_host = "127.0.0.1:11451"
qq_invite_join_group_notice = true
qq_disable_temp_session = false
qq_enable_listening_self_message = false
allow_request_private_ip = false
allow_bot_auto_approve_group_invite = false
no_confirm = false
slower_schedule = false
enable_dirty_check = true
enable_rickroll = true
rickroll_msg = "https://wdf.ink/6OUp"
enable_urlmanager = true
enable_tos = false
tos_waring_counts = 5
tos_temp_ban_time = 300
enable_analytics = true
enable_eval = true
enable_get_petal = true
gained_petal_limit = 10
lost_petal_limit = 5
coin_limit = 10000
coin_faceup_rate = 4997
coin_facedown_rate = 4997
dice_limit = 100
dice_roll_limit = 10
dice_mod_max = 10000
dice_mod_min = -10000
dice_output_count = 50
dice_output_len = 200
dice_detail_count = 5
dice_count_limit = 10
```

## 属性

### secret

<div className="apiTable">

| 属性                              | 使用模块            | 默认值                | 描述                                                   |
| ------------------------------- | --------------- | ------------------ | ---------------------------------------------------- |
| db_path                         |                 | "mysql+pymysql://" | 数据库路径，用于存储用户数据。                                      |
| check_accessKeyId               |                 |                    | 调用阿里云内容安全服务 API 时需要的 AccessKey ID。                   |
| check_accessKeySecret           |                 |                    | 调用阿里云内容安全服务 API 时需要的 AccessKey Secret。               |
| web_render                      |                 |                    | Webrender 的地址（IP 或域名）及端口。                            |
| proxy                           |                 |                    | 代理服务的地址（IP 或域名）及端口。                                  |
| dc_token                        |                 |                    | Discord 机器人令牌。                                       |
| kook_token                      |                 |                    | Kook 机器人令牌。                                          |
| tg_token                        |                 |                    | Telegram 机器人令牌。                                      |
| matrix_homeserver               |                 |                    | Matrix 服务器 URL。                                      |
| matrix_user                     |                 |                    | Matrix 机器人用户 ID（含`@`与`:`）。                           |
| matrix_device_id                |                 |                    | Matrix 机器人设备 ID。                                     |
| matrix_device_name              |                 |                    | Matrix 机器人设备名称。                                      |
| matrix_token                    |                 |                    | Matrix 机器人令牌。                                        |
| matrix_megolm_backup_passphrase |                 |                    | Matrix 机器人的 Megolm 备份密码短语。                           |
| openai_api_key                  | `ask` `summary` |                    | OpenAI API 密钥。                                       |
| curseforge_api_key              | `mod_dl`        |                    | Curseforge API 密钥。                                   |
| exchange_rate_api_key           | `exchange_rate` |                    | ExchangeRate-API 密钥。                                 |
| wolfram_alpha_appid             | `wolframalpha`  |                    | WolframAlpha API 的 App ID。                           |
| jwt_secret                      |                 |                    |                                                      |

</div>

### config

<div className="apiTable">

| 属性                                  | 使用模块                | 默认值                                                          | 描述                                                         |
| ----------------------------------- | ------------------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| api_port                            |                     | 5000                                                         |                                                            |
| base_superuser                      |                     | "QQ|2596322644"                                              | 机器人主超级用户，输入用户对应的 ID。可使用 `whoami` 命令查看自己的 ID。               |
| debug                               |                     | false                                                        | 设置是否启用 Logger 的除错模式。                                       |
| cache_path                          |                     | "./cache/"                                                   | 图片等的缓存路径。                                                  |
| command_prefix                      |                     | ["~", "～",]                                                  | 默认命令前缀列表。                                                  |
| confirm_command                     |                     | ["是", "对", "對", "yes", "Yes", "YES", "y", "Y",]              | 命令确认词列表。                                                   |
| disabled_bots                       |                     | ["",]                                                        | 机器人禁用的平台列表，平台名称为 `bots` 目录下对应的文件名。                         |
| locale                              |                     | "zh_cn"                                                      | 机器人默认使用的语言。                                                |
| timezone_offset                     |                     | "+8"                                                         | 机器人默认时区偏移量。                                                |
| bug_report_url                      |                     | "https://s.wd-ljt.com/botreportbug"                          | 汇报错误的网址。                                                   |
| bug_report_targets                  |                     | ["",]                                                        | 机器人发生错误时发送错误报告的群列表。                                        |
| donate_url                          | `help`              | "https://afdian.net/@teahouse"                               | 赞助的网址。                                                     |
| help_url                            | `help`              | "[https://bot.teahouse.team](https://bot.teahouse.team/)"    | 提供帮助的网址。                                                   |
| issue_url                           |                     | "https://github.com/Teahouse-Studios/bot/issues/new/choose"  | 提交问题（如封禁申诉等）的网址。                                           |
| wiki_whitelist_url                  | `wiki`              | "https://s.wd-ljt.com/botwhitelist"                          | 申请 Wiki 白名单的网址。                                            |
| qq_account                          |                     | 2314163511                                                   | 机器人的 QQ 号。                                                 |
| qq_host                             |                     | "127.0.0.1:11451"                                            | 用于 go-cqhttp 反向连接的 IP 地址及端口。                               |
| allow_bot_auto_approve_group_invite |                     | false                                                        | 设置是否启用机器人在收到 QQ 群邀请时发送提醒消息。                                |
| qq_disable_temp_session             |                     | false                                                        | 设置是否禁用机器人在 QQ 的临时会话。                                       |
| qq_enable_listening_self_message    |                     | false                                                        | 设置是否启用 QQ 的自我消息处理。                                         |
| web_render_local                    |                     |                                                              | 本地 Webrender 的地址，留空则与`web_render`相同。                       |
| no_confirm                          |                     | false                                                        | 设置是否跳过确认消息直接执行命令。                                          |
| slower_schedule                     |                     | false                                                        | 设置是否让计划任务模块使用更长的时间间隔执行。                                    |
| enable_dirty_check                  |                     | true                                                         | 设置是否启用屏蔽词检查。                                               |
| enable_rickroll                     |                     | true                                                         | 设置请求被拦截时是否输出网址。                                            |
| rickroll_msg                        |                     | "https://wdf.ink/6OUp"                                       | 请求被拦截时输出的内容。                                               |
| enable_urlmanager                   | `wiki` `wiki_audit` | true                                                         | 设置是否启用 URL 管理，禁用后无法使用 `wiki_audit` 命令。                     |
| enable_tos                          |                     | false                                                        | 设置是否启用内置的违反服务条款检查。                                         |
| tos_waring_counts                   |                     | 5                                                            | 设置用户违反服务条款的最高警告次数。                                         |
| tos_temp_ban_time                   |                     | 300                                                          | 设置用户违反服务条款后的临时限制时间。                                        |
| enable_analytics                    | `analytics`         | true                                                         | 设置是否启用 `analytics` 模块相关命令。                                 |
| allow_request_private_ip            |                     | false                                                        | 设置是否允许私有 IP 请求网站。                                          |
| enable_eval                         | `eval`              | true                                                         | 设置是否启用 `eval` 模块相关命令。                                      |
| enable_get_petal                    | `petal`             |                                                              | 设置是否启用通过游戏获取花瓣。                                            |
| gained_petal_limit                  | `petal`             | 10                                                           | 设置一天内获得的花瓣数量限制。                                            |
| lost_petal_limit                    | `petal`             | 5                                                            | 设置一天内失去的花瓣数量限制。                                            |
| coin_limit                          | `coin`              | 10000                                                        | 一次可投掷的硬币最大个数。                                              |
| coin_faceup_rate                    | `coin`              | 4994                                                         | 硬币正面朝上的概率，按一万分之几计算。                                        |
| coin_facedown_rate                  | `coin`              | 4994                                                         | 硬币反面朝上的概率，按一万分之几计算。                                        |
| dice_limit                          | `dice`              | 100                                                          | 一次可投掷的骰子最大个数。                                              |
| dice_roll_limit                     | `dice`              | 10                                                           | 投掷骰子的最大次数。                                                 |
| dice_mod_max                        | `dice`              | 10000                                                        | 投掷骰子的最大调节值。                                                |
| dice_mod_min                        | `dice`              | \-10000                                                      | 投掷骰子的最小调节值。                                                |
| dice_limit                          | `dice`              | 100                                                          | 一次可投掷的骰子最大个数。                                              |
| dice_output_cnt                     | `dice`              | 50                                                           | 输出时的最大数据量，超过则无法正常显示。                                       |
| dice_detail_cnt                     | `dice`              | 5                                                            | 多次投掷骰子的总数，超过则不再显示详细信息。                                     |
| dice_count_limit                    | `dice`              | 10                                                           | 骰子多项式最大的项数。                                                |

</div>
