---
sidebar_position: 4
description: 安装小可运行时用到的依赖
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Asciinema from "@site/src/components/Asciinema";

# 安装依赖

<Tabs groupId="operating-systems">
<TabItem value="win" label="Windows" default>
<Tabs>
<TabItem value="c1" label="使用 Poetry" default>

如果你已经安装了 Poetry，你可以跳过以下安装步骤。

1. 安装 Poetry：

   <Tabs>
   <TabItem value="c1" label="方法一" default>

   :::tip

   pip 在国内的下载速度比较慢，你可以通过以下命令设置 pip 的镜像源来加快连接速度（建议）：

   ```powershell
   pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
   ```

   :::

   1. 打开终端，执行以下命令来安装 pipx：

      ```powershell
      pip install --user pipx
      python -m pipx ensurepath
      ```

      <Asciinema
          url="https://d.kstore.space/download/7507/642714.cast"
          options={{
              theme: "monokai",
              poster: "npt:21.5",
              cols: 100,
              rows: 30,
              idleTimeLimit: 0.25,
          }}
      />

   2. 重启终端，并输入以下命令：

      ```powershell
      pipx install poetry
      ```

      <Asciinema
          url="https://d.kstore.space/download/7507/642717.cast"
          options={{
              theme: "monokai",
              poster: "npt:21.5",
              cols: 100,
              rows: 30,
              idleTimeLimit: 0.25,
          }}
      />

   3. 安装完成后，你可以通过运行 `poetry --version` 来确认 Poetry 是否有效安装。

   </TabItem>
   <TabItem value="c2" label="方法二">

   1. 打开 Powershell，并执行以下指令来安装 Poetry：

      ```powershell
      (Invoke-WebRequest -Uri "https://install.python-poetry.org" -UseBasicParsing).Content | py -
      ```

      :::info

      若你使用了 Microsoft Store 或 pyenv-windows 安装 Python，请将 `py` 替换为 `python`。

      :::

      :::warning

      安装 Poetry 前请**务必**检查系统环境变量中是否存在多个 Python Executable Path（Python 可执行路径）并及时清除，否则安装 Poetry 后可能会出现 Python 环境混乱导致无法正常加载依赖的情况。

      :::

   2. 安装完成后，请将以下目录添加到 PATH 环境变量，请善用搜索引擎寻找更改 PATH 的方法：

      ```
      %APPDATA%\Python\Scripts
      ```

      :::info

      在添加到 PATH 之后，你通常需要重启终端，甚至整个电脑才能使其生效。

      你可以通过运行 `poetry --version` 来确认 Poetry 是否有效安装。

      :::

   </TabItem>
   </Tabs>

2. 在安装完 Poetry 后，请执行以下指令：

   :::tip

   Poetry 在国内的下载速度比较慢，你可以通过以下命令设置 Poetry 的镜像源来加快连接速度（建议）：

   ```powershell
   poetry source add --priority=default mirrors https://pypi.tuna.tsinghua.edu.cn/simple/
   ```

   :::

   ```powershell
   poetry install
   ```

   <Asciinema
       url="https://d.kstore.space/download/7507/605659.cast"
       options={{
           theme: "monokai",
           poster: "npt:21.5",
           cols: 100,
           rows: 30,
           idleTimeLimit: 0.25,
       }}
   />

</TabItem>
<TabItem value="c2" label="使用 pip">

如果你不想使用 Poetry，你可以使用 pip 来安装依赖：

:::tip

pip 在国内的下载速度比较慢，你可以通过以下命令设置 pip 的镜像源来加快连接速度（建议）：

```powershell
python -m pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

:::

```powershell
pip install -r requirements.txt
```

<Asciinema
    url="https://d.kstore.space/download/7507/605643.cast"
    options={{
        theme: "monokai",
        poster: "npt:21.5",
        cols: 100,
        rows: 30,
        idleTimeLimit: 0.1,
    }}
/>

</TabItem>
</Tabs>

:::info

在安装依赖时若出现报错，请转到[疑难解答](troubleshooting)

:::

</TabItem>
<TabItem value="linux" label="Linux">
<Tabs>
<TabItem value="c1" label="使用 Poetry" default>

如果你已经安装了 Poetry，你可以跳过以下安装步骤。

1. 安装 Poetry：

   <Tabs>
   <TabItem value="c1" label="方法一" default>

   :::tip

   pip 在国内的下载速度比较慢，你可以通过以下命令设置 pip 的镜像源来加快连接速度（建议）：

   ```sh
   pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
   ```

   :::

   1. 打开终端，执行以下命令来安装 pipx：

      ```sh
      pip install --user pipx
      python -m pipx ensurepath
      ```

      <Asciinema
          url="https://d.kstore.space/download/7507/642714.cast"
          options={{
              theme: "monokai",
              poster: "npt:21.5",
              cols: 100,
              rows: 30,
              idleTimeLimit: 0.25,
          }}
      />

   2. 重启终端，并输入以下命令：

      :::info

      在此之前，你可能需要先安装 `python3-venv`：

      ```sh
      sudo apt-get install python3-venv
      ```

      安装的命令会因为系统的不同而发生改变。

      :::

      ```sh
      pipx install poetry
      ```

      <Asciinema
          url="https://d.kstore.space/download/7507/642717.cast"
          options={{
              theme: "monokai",
              poster: "npt:21.5",
              cols: 100,
              rows: 30,
              idleTimeLimit: 0.25,
          }}
      />

   3. 安装完成后，你可以通过运行 `poetry --version` 来确认 Poetry 是否有效安装。

   </TabItem>
   <TabItem value="c2" label="方法二">

   1. 打开终端，并执行以下指令来安装 Poetry：

      ```sh
      curl -sSL "https://install.python-poetry.org" | python3 -
      ```

      :::warning

      安装 Poetry 前请**务必**检查系统环境变量中是否存在多个 Python Executable Path（Python 可执行路径）并及时清除，否则安装 Poetry 后可能会出现 Python 环境混乱导致无法正常加载依赖的情况。

      :::

      <Asciinema
          url="https://d.kstore.space/download/7507/604782.cast"
          options={{
              theme: "monokai",
              poster: "npt:21.5",
              cols: 100,
              rows: 30,
              idleTimeLimit: 1,
          }}
      />

   2. 安装完成后，请将以下目录添加到 PATH 环境变量，请善用搜索引擎寻找修改 PATH 的方法：

      ```
      $HOME/.local/bin
      ```

      :::info

      在添加到 PATH 之后，你通常需要重启终端，甚至整个电脑才能使其生效。

      你可以通过 `poetry --version` 确认安装是否有效。

      :::

   </TabItem>
   </Tabs>

2. 在安装完 Poetry 后，请执行以下指令：

   :::tip

   Poetry 在国内的下载速度比较慢，你可以通过以下命令设置 Poetry 的镜像源来加快连接速度（建议）：

   ```sh
   poetry source add --priority=default mirrors https://pypi.tuna.tsinghua.edu.cn/simple/
   ```

   :::

   ```sh
   poetry install
   ```

   <Asciinema
       url="https://d.kstore.space/download/7507/605659.cast"
       options={{
           theme: "monokai",
           poster: "npt:21.5",
           cols: 100,
           rows: 30,
           idleTimeLimit: 0.25,
       }}
   />

</TabItem>
<TabItem value="c2" label="使用 pip">

如果你不想使用 Poetry，你可以使用 pip 来安装依赖：

:::tip

pip 在国内的下载速度比较慢，你可以通过以下命令设置 pip 的镜像源来加快连接速度（建议）：

```sh
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

:::

```sh
pip install -r requirements.txt
```

<Asciinema
    url="https://d.kstore.space/download/7507/605643.cast"
    options={{
        theme: "monokai",
        poster: "npt:21.5",
        cols: 100,
        rows: 30,
        idleTimeLimit: 0.1,
    }}
/>

</TabItem>
</Tabs>

:::info

在安装依赖时若出现报错，请转到[疑难解答](troubleshooting)

:::

</TabItem>
</Tabs>
